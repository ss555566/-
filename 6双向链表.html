<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>双向链表</title>
</head>
<body>
	<script>
		// 链表节点
		class Node {
			constructor(element) {
				this.element = element
				this.prev = null
				this.next = null
			}
		}

		// 双向链表
		class DoubleLinkedList {
			constructor() {
				this.head = null
				this.tail = null
				this.length = 0
			}

			// 追加元素
			append(element) {
				const node = new Node(element)
				let current = null
				if (this.head === null) {
					this.head = node
				} else {
					current = this.head
					while(current.next) {
						current = current.next
					}
					current.next = node
				}
				this.length++
			}

			// 任意位置插入元素
			insert(position, element) {
				if (position >= 0 && position <= this.length) {
					const node = new Node(element)
					let current = this.head
					let previous = null
					let index = 0
					// 首位
					if (position === 0) {
						if (!head) {
							this.head = node
							this.tail = node
						} else {
							node.next = current
							this.head = node
							current.prev = node
							
						}
					// 末位 
					} else if(position === this.length) {
						current = this.tail
						current.next = node
						node.prev = current
						this.tail = node
					// 中位
					} else {
						while (index++ < position) {
							previous = current
							current = current.next
						}
						node.next = current
						previous.next = node
						current.previous = node
						node.prev = previous
					}			
					this.length++
					return true
				}
				return false
			}

			// 移除指定位置元素
			removeAt(position) {
				// 检查越界值
				if (position > -1 && position < this.length) {
					let current = this.head
					let previous = null
					let index = 0
					// 首位
					if (position === 0) {
						this.head = this.head.next
						this.head.prev = null
						if (this.length === 1) {
							this.tail = null
						}
					// 末位
					} else if (position === this.length - 1) {
						this.tail = this.tail.prev
						this.tail.next = null
					} else {
						while(index++ < position) {
							previous = current
							current = current.next
						}
						previous.next = current.next
						current.next.prev = previous
					}
					this.length--
					return current.element
				} else {
					return null
				}
			}
		}

		// 	//寻找元素下标
		// 	findIndex(element) {
		// 		let current = this.head
		// 		let index = -1
		// 		while(current) {
		// 			if (element === current.element) {
		// 				return index + 1
		// 			}
		// 			index++
		// 			current = current.next
		// 		}
		// 		return -1
		// 	}

		// 	// 删除指定文档
		// 	remove(element) {
		// 		const index = this.indexOf(element)
		// 		return this.removeAt(index)
		// 	}

		// 	isEmpty() {
		// 		return !this.length
		// 	}

		// 	size() {
		// 		return this.length
		// 	}

		// 	// 转为字符串
		// 	toString() {
		// 		let current = this.head
		// 		let string = ''
		// 		while(current) {
		// 			string += `${current.element}`
		// 			current = current.next
		// 		}
		// 		return string
		// 	}
		// }

		// 链表类的使用
		const doubleLinkedList = new DoubleLinkedList()
		console.log(doubleLinkedList)

		doubleLinkedList.append(2)
		doubleLinkedList.append(6)
		doubleLinkedList.append(14)
		doubleLinkedList.append(152)
		doubleLinkedList.insert(3, 18)

		console.log(doubleLinkedList)
		// console.log(doubleLinkedList)
		// linkedList.append(2)
		// linkedList.append(6)
		// linkedList.append(24)
		// linkedList.append(152)

		// linkedList.insert(3, 18)
		// console.log(linkedList)
		// console.log(linkedList.findIndex(24))


	</script>
</body>
</html>